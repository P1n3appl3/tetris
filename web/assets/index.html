<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="./style.css" />
        <link rel="icon" type="image/png" href="./icon.png" />
        <title>plink plonk</title>
    </head>
    <body>
        <div id="main" tabindex="0">
            <div id="left">
                <div id="top">
                    <canvas id="hold" width="96" height="96"></canvas>
                </div>
                <div id="bottom">
                    <div id="spins" width="200" height="200" style="white-space: pre-line">spins<br>spins2</div>
                </div>
            </div>
            <div id="center">
                <canvas id="board" width="242" height="480"> </canvas>
                <div id="stats">
                    <div id="timer">0.0</div>
                </div>
            </div>
            <div id="right">
                <canvas id="queue" width="96" height="360"></canvas>
                <div id="right-info"></div>
            </div>
        </div>
        <div id="fps">fps: 0</div>
    </body>
    <div class="settings">
        <details>
            <summary>keybinds</summary>
            <button id="bind-all" style="float: right">bind all</button>
            <button id="reset-bindings" style="float: right">reset</button>
            <div style="clear: both; padding: 0px"></div>
            <label> left <button id="left-key">j</button> </label>
            <label> soft-drop <button id="soft-key">k</button> </label>
            <label> right <button id="right-key">l</button> </label>
            <label> hard-drop <button id="hard-key">space</button> </label>
            <label>
                <span> rotate <img src="./cw.svg" class="icon" /> </span>
                <button id="cw-key">f</button>
            </label>
            <label>
                <span> rotate <img src="./ccw.svg" class="icon" /> </span>
                <button id="ccw-key">d</button>
            </label>
            <label> flip <button id="flip-key">s</button> </label>
            <label> hold <button id="hold-key">a</button> </label>
            <hr />
            <label> restart <button id="restart-key">r</button> </label>
            <label> undo <button id="undo-key">u</button> </label>
        </details>
        <details>
            <summary>gameplay</summary>
            <label
                >DAS: <input id="das" class="num-select" type="number" value="10"
            /></label>
            <label
                >ARR: <input id="arr" class="num-select" type="number" value="0"
            /></label>
            <label
                >soft-drop:
                <input id="soft-drop" class="num-select" type="number" value="5.0"
            /></label>
            <label
                >gravity: <input id="gravity" class="num-select" type="number" value="1.0"
            /></label>
            <!-- TODO: lock delay -->
            <hr />
            <label>
                rotation/kicks:
                <select name="kick" id="kick-select">
                    <option>SRS</option>
                    <option>SRS+</option>
                    <option>TGM</option>
                    <option>none</option>
                </select>
            </label>
            <label>
                garbage table:
                <select name="garbage" id="garbage-select">
                    <option>guideline</option>
                    <option>tetrio</option>
                    <option>jstris</option>
                </select>
            </label>
        </details>
        <details>
            <summary>graphics</summary>
            <div>
                <button>status</button>
                <!-- TODO: js to update an <img> tag with the contents of the textbox for a preview -->
                <input
                    type="url"
                    id="skin-url"
                    placeholder="Skin image url"
                    value="https://i.imgur.com/zjItrsg.png"
                />
            </div>
            find skins
            <a
                target="_blank"
                href="https://konsola5.github.io/jstris-customization-database"
            >
                here
            </a>
            <hr />
            <label
                >grid:
                <select name="grid" id="grid-select">
                    <option>partial</option>
                    <option>dotted</option>
                    <option>full</option>
                    <option>dots</option>
                    <option>pluses</option>
                    <option>none</option>
                </select>
            </label>
            <label>opacity:<input type="range" /></label>
            <hr />
            <label>
                ghost:
                <select name="ghost" id="ghost-select">
                    <option>skin</option>
                    <option>solid</option>
                    <option>outline</option>
                    <option>mino outline</option>
                    <option>none</option>
                </select>
            </label>
            <label>colored:<input type="checkbox" /></label>
            <label>opacity:<input type="range" /></label>
        </details>
        <details>
            <summary>sound</summary>
            <label>
                preset:
                <select name="sound-preset" id="sound-preset">
                    <option>custom</option>
                    <option>friends</option>
                    <option>ppt</option>
                    <option>tec</option>
                    <option>99</option>
                    <option>tgm</option>
                    <option>tetrio</option>
                    <option>nullpomino</option>
                    <option>rainforest</option>
                    <option>yotipo's</option>
                    <option>tetra x</option>
                </select>
            </label>
            <details>
                <summary>actions</summary>
                <label>move<input type="url" placeholder="url of sound file..." /></label>
                <label>rotate<input type="url" placeholder="url of sound file..." /></label>
                <label>spin<input type="url" placeholder="url of sound file..." /></label>
                <label
                    >minispin<input type="url" placeholder="url of sound file..."
                /></label>
                <label>land<input type="url" placeholder="url of sound file..." /></label>
                <label
                    >hard-drop<input type="url" placeholder="url of sound file..."
                /></label>
                <label
                    >soft-drop<input type="url" placeholder="url of sound file..."
                /></label>
                <label
                    >gravity<input type="url" placeholder="url of sound file..."
                /></label>
                <label>lock<input type="url" placeholder="url of sound file..." /></label>
                <label>hold<input type="url" placeholder="url of sound file..." /></label>
                <label>nohold<input type="url" placeholder="url of sound file..." /></label>
            </details>
            <details>
                <summary>line clears</summary>
            </details>
            <details>
                <summary>meta</summary>
            </details>
        </details>
        <details>
            <summary>stats</summary>
            <label>
                Row 1:
                <select name="row-1" id="row-1">
                    <option>time</option>
                    <option>pieces</option>
                    <option>lines</option>
                    <option>attack</option>
                    <option>apm</option>
                    <option>ppm</option>
                    <option>kpp</option>
                    <option>finesse</option>
                    <option>holds</option>
                </select>
            </label>
            <label>
                Row 2:
                <select name="row-1" id="row-1">
                    <option>time</option>
                    <option>pieces</option>
                    <option>lines</option>
                    <option>attack</option>
                    <option>apm</option>
                    <option>ppm</option>
                    <option>kpp</option>
                    <option>finesse</option>
                    <option>holds</option>
                </select>
            </label>
            <label>
                Row 3:
                <select name="row-1" id="row-1">
                    <option>time</option>
                    <option>pieces</option>
                    <option>lines</option>
                    <option>attack</option>
                    <option>apm</option>
                    <option>ppm</option>
                    <option>kpp</option>
                    <option>finesse</option>
                    <option>holds</option>
                </select>
            </label>
            <label>
                Row 4:
                <select name="row-1" id="row-1">
                    <option>time</option>
                    <option>pieces</option>
                    <option>lines</option>
                    <option>attack</option>
                    <option>apm</option>
                    <option>ppm</option>
                    <option>kpp</option>
                    <option>finesse</option>
                    <option>holds</option>
                </select>
            </label>
        </details>
    </div>
    <script type="module">
        import init, { main } from "./tetris.js";
        async function run() {
            await init();
            await main();
        }
        run();
    </script>
</html>
